@page "/settings"


@inject IOptionsMonitor<ConfigWrapper> Config
<h1>Settings</h1>

<table style="width:50%">
    <tr>
        <td>Teams Presence Polling Interval</td>
        <td style="width:50%">
            <Slider TValue="double" @bind-Value="@Config.CurrentValue.PollingInterval" Step=".1" Min="1.0" Max="5.0" />&nbsp;<input style="width:50px" @bind-value="@Config.CurrentValue.PollingInterval" type="text" />
        </td>
    </tr>
    <tr>
        <td>
            Brightness
        </td>
        <td style="width:50%">
            <Slider TValue="int" @bind-Value="@Config.CurrentValue.Brightness" Step="1" Min="0" Max="100" />&nbsp;<input style="width:50px" @bind-value="@Config.CurrentValue.Brightness" type="text" />
        </td>
    </tr>
</table>

<button @onclick="SaveSettings" class="btn btn-primary">Save</button>
@code {


    void SaveSettings()
    {
        System.IO.File.WriteAllText($"{System.IO.Directory.GetCurrentDirectory()}/AADSettings.json", JsonConvert.SerializeObject(Config.CurrentValue));
    }
}
